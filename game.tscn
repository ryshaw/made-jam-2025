[gd_scene load_steps=16 format=3 uid="uid://lqiau5j52a31"]

[ext_resource type="PackedScene" uid="uid://qjg3h4w3liqo" path="res://player.tscn" id="1_80nbo"]
[ext_resource type="Script" uid="uid://dd2lbi1f60vup" path="res://game.gd" id="1_fc0e3"]
[ext_resource type="Script" uid="uid://coqisclamvyny" path="res://background.gd" id="2_7jktm"]
[ext_resource type="PackedScene" uid="uid://dw710ilgm08gg" path="res://base_bar.tscn" id="2_feb5d"]
[ext_resource type="Texture2D" uid="uid://dqyat2gimuc6y" path="res://springground.png" id="2_vef74"]
[ext_resource type="Texture2D" uid="uid://yhwwqjdy8dn5" path="res://summerground.png" id="3_hve3p"]
[ext_resource type="Texture2D" uid="uid://de8ig73n1p2t0" path="res://Autumground.png" id="4_mfdv2"]
[ext_resource type="PackedScene" uid="uid://4r4urahws6qf" path="res://game_button.tscn" id="5_7jktm"]
[ext_resource type="Texture2D" uid="uid://bjw5s0u1x5nfs" path="res://winterground.png" id="5_iotsf"]

[sub_resource type="SpriteFrames" id="SpriteFrames_lc2xo"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_vef74")
}, {
"duration": 1.0,
"texture": ExtResource("3_hve3p")
}, {
"duration": 1.0,
"texture": ExtResource("4_mfdv2")
}, {
"duration": 1.0,
"texture": ExtResource("5_iotsf")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_fc0e3"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_e2o6t"]

[sub_resource type="LabelSettings" id="LabelSettings_ryrav"]
font_size = 32
outline_size = 20
outline_color = Color(0, 0, 0, 1)
shadow_size = 16
shadow_color = Color(0, 0, 0, 1)
shadow_offset = Vector2(4, 4)

[sub_resource type="LabelSettings" id="LabelSettings_fc0e3"]
font_size = 128
outline_size = 48
outline_color = Color(0, 0, 0, 1)
shadow_size = 16
shadow_color = Color(0, 0, 0, 1)
shadow_offset = Vector2(12, 12)

[sub_resource type="LabelSettings" id="LabelSettings_7jktm"]
font_size = 68
outline_size = 32
outline_color = Color(0, 0, 0, 1)
shadow_size = 16
shadow_color = Color(0, 0, 0, 1)
shadow_offset = Vector2(8, 8)

[node name="Game" type="Node"]
script = ExtResource("1_fc0e3")

[node name="SeasonTimer" type="Timer" parent="."]

[node name="EnemyTimer" type="Timer" parent="."]
wait_time = 5.0
autostart = true

[node name="Background" type="AnimatedSprite2D" parent="."]
position = Vector2(960, 540)
sprite_frames = SubResource("SpriteFrames_lc2xo")
script = ExtResource("2_7jktm")

[node name="Player" parent="." instance=ExtResource("1_80nbo")]
position = Vector2(960, 540)

[node name="Display" type="CanvasLayer" parent="."]

[node name="Margins" type="MarginContainer" parent="Display"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 40
theme_override_constants/margin_top = 20
theme_override_constants/margin_right = 40
theme_override_constants/margin_bottom = 20

[node name="VBoxContainer" type="VBoxContainer" parent="Display/Margins"]
layout_mode = 2

[node name="Bars" type="HBoxContainer" parent="Display/Margins/VBoxContainer"]
layout_mode = 2
alignment = 1

[node name="HealthBar" parent="Display/Margins/VBoxContainer/Bars" instance=ExtResource("2_feb5d")]
unique_name_in_owner = true
layout_mode = 2
label_text = "Health"
bar_color = Color(0.91332746, 0.33133173, 0.34241337, 1)

[node name="VSeparator" type="VSeparator" parent="Display/Margins/VBoxContainer/Bars"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_styles/separator = SubResource("StyleBoxEmpty_fc0e3")

[node name="SeasonBar" parent="Display/Margins/VBoxContainer/Bars" instance=ExtResource("2_feb5d")]
unique_name_in_owner = true
layout_mode = 2
label_text = "Time to Next Season"

[node name="VSeparator2" type="VSeparator" parent="Display/Margins/VBoxContainer/Bars"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_styles/separator = SubResource("StyleBoxEmpty_fc0e3")

[node name="XPBar" parent="Display/Margins/VBoxContainer/Bars" instance=ExtResource("2_feb5d")]
unique_name_in_owner = true
layout_mode = 2
label_text = "XP"
bar_color = Color(0.40784314, 1, 1, 1)

[node name="MiddleGap" type="HSeparator" parent="Display/Margins/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
theme_override_styles/separator = SubResource("StyleBoxEmpty_e2o6t")

[node name="Upgrades" type="HBoxContainer" parent="Display/Margins/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 4
theme_override_constants/separation = 50
alignment = 1

[node name="HealthUpgrade" type="VBoxContainer" parent="Display/Margins/VBoxContainer/Upgrades"]
layout_mode = 2
theme_override_constants/separation = 10

[node name="HealthButton" parent="Display/Margins/VBoxContainer/Upgrades/HealthUpgrade" instance=ExtResource("5_7jktm")]
unique_name_in_owner = true
modulate = Color(0.86591214, 0.4614539, 0.42285526, 1)
layout_mode = 2
text = "Upgrade Health"

[node name="HealthCost" type="Label" parent="Display/Margins/VBoxContainer/Upgrades/HealthUpgrade"]
unique_name_in_owner = true
layout_mode = 2
text = "Upgrade Cost: 10%"
label_settings = SubResource("LabelSettings_ryrav")
horizontal_alignment = 1

[node name="DamageUpgrade" type="VBoxContainer" parent="Display/Margins/VBoxContainer/Upgrades"]
layout_mode = 2
theme_override_constants/separation = 10

[node name="DamageButton" parent="Display/Margins/VBoxContainer/Upgrades/DamageUpgrade" instance=ExtResource("5_7jktm")]
unique_name_in_owner = true
modulate = Color(0.74285364, 0.66447556, 1.540184e-06, 1)
layout_mode = 2
text = "Upgrade Damage"

[node name="DamageCost" type="Label" parent="Display/Margins/VBoxContainer/Upgrades/DamageUpgrade"]
unique_name_in_owner = true
layout_mode = 2
text = "Upgrade Cost: 10%"
label_settings = SubResource("LabelSettings_ryrav")
horizontal_alignment = 1

[node name="FireRateUpgrade" type="VBoxContainer" parent="Display/Margins/VBoxContainer/Upgrades"]
layout_mode = 2
theme_override_constants/separation = 10

[node name="FireRateButton" parent="Display/Margins/VBoxContainer/Upgrades/FireRateUpgrade" instance=ExtResource("5_7jktm")]
unique_name_in_owner = true
modulate = Color(0.22129604, 0.69358057, 0.9999998, 1)
layout_mode = 2
text = "Upgrade Fire Rate"

[node name="FireRateCost" type="Label" parent="Display/Margins/VBoxContainer/Upgrades/FireRateUpgrade"]
unique_name_in_owner = true
layout_mode = 2
text = "Upgrade Cost: 10%"
label_settings = SubResource("LabelSettings_ryrav")
horizontal_alignment = 1

[node name="RangeUpgrade" type="VBoxContainer" parent="Display/Margins/VBoxContainer/Upgrades"]
layout_mode = 2
theme_override_constants/separation = 10

[node name="RangeButton" parent="Display/Margins/VBoxContainer/Upgrades/RangeUpgrade" instance=ExtResource("5_7jktm")]
unique_name_in_owner = true
modulate = Color(0.4052964, 0.76290244, 7.70092e-07, 1)
layout_mode = 2
text = "Upgrade Range"

[node name="RangeCost" type="Label" parent="Display/Margins/VBoxContainer/Upgrades/RangeUpgrade"]
unique_name_in_owner = true
layout_mode = 2
text = "Upgrade Cost: 10%"
label_settings = SubResource("LabelSettings_ryrav")
horizontal_alignment = 1

[node name="Label" type="Label" parent="Display"]
offset_right = 40.0
offset_bottom = 23.0

[node name="GameOver" type="CenterContainer" parent="Display"]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="VBoxContainer" type="VBoxContainer" parent="Display/GameOver"]
layout_mode = 2
theme_override_constants/separation = 12

[node name="Label" type="Label" parent="Display/GameOver/VBoxContainer"]
layout_mode = 2
text = "game over :("
label_settings = SubResource("LabelSettings_fc0e3")

[node name="Label2" type="Label" parent="Display/GameOver/VBoxContainer"]
layout_mode = 2
text = "press anything to retry"
label_settings = SubResource("LabelSettings_7jktm")
horizontal_alignment = 1

[node name="GameWin" type="CenterContainer" parent="Display"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="VBoxContainer" type="VBoxContainer" parent="Display/GameWin"]
layout_mode = 2
theme_override_constants/separation = 12

[node name="Label" type="Label" parent="Display/GameWin/VBoxContainer"]
layout_mode = 2
text = "you win!!! :)
to new beginnings!
"
label_settings = SubResource("LabelSettings_fc0e3")
horizontal_alignment = 1

[node name="Label2" type="Label" parent="Display/GameWin/VBoxContainer"]
layout_mode = 2
text = "press anything to restart game"
label_settings = SubResource("LabelSettings_7jktm")
horizontal_alignment = 1

[connection signal="seasonChange" from="." to="Player" method="_on_game_season_change"]
[connection signal="seasonChange" from="." to="Background" method="_on_game_season_change"]
[connection signal="timeout" from="SeasonTimer" to="." method="_on_season_timer_timeout"]
[connection signal="timeout" from="EnemyTimer" to="." method="_on_enemy_timer_timeout"]
[connection signal="health_updated" from="Player" to="." method="_on_player_health_updated"]
[connection signal="pressed" from="Display/Margins/VBoxContainer/Upgrades/HealthUpgrade/HealthButton" to="." method="_on_health_button_pressed"]
[connection signal="pressed" from="Display/Margins/VBoxContainer/Upgrades/DamageUpgrade/DamageButton" to="." method="_on_damage_button_pressed"]
[connection signal="pressed" from="Display/Margins/VBoxContainer/Upgrades/FireRateUpgrade/FireRateButton" to="." method="_on_fire_rate_button_pressed"]
[connection signal="pressed" from="Display/Margins/VBoxContainer/Upgrades/RangeUpgrade/RangeButton" to="." method="_on_range_button_pressed"]
